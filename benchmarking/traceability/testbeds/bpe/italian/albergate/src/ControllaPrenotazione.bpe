▁p ackage ▁interfacce ; ▁import ▁java . awt .* ; ▁import ▁java . awt . event .* ; ▁import ▁common . utility .* ; ▁import ▁common . def .* ; ▁import ▁java . util . Date ; ▁import ▁modul i .* ; ▁public ▁class ▁Controlla Prenotazione ▁ext ends ▁Maschera Prenotazione ▁{ ▁Prenotazione ▁p ; ▁Prenotazioni Scadut e ▁parent ; ▁public ▁Controlla Prenotazione ( Prenotazione ▁pren , ▁Stanza ▁room , ▁Prenotazioni Scadut e ▁papa ) ▁{ ▁super ( room ,"",""," C o nt roll a ▁dei ▁dati ▁della ▁prenotazione "," ▁ Rinnova ▁" , 5, pren . getP ensionamento ()); ▁p ▁= ▁pren ; ▁parent ▁= ▁papa ; ▁init (); ▁} ▁public ▁void ▁init () ▁{ ▁writeDati Pren ( p ); ▁for ( int ▁i =0; ▁i < 11 ; ▁i ++) ▁testo [ i ]. setEditable ( false ); ▁testo [9]. setText ( DateUtils . parse Date ( DateUtils . give String Of Date ( p . getData Pren ())) ); ▁Azione . a ddActionListener ( new ▁ActionListener () ▁{ ▁public ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁start Rinnova (); ▁dispose (); ▁parent . dispose (); ▁start Update (); ▁} ▁} ); ▁Cancella . a ddActionListener ( new ▁ActionListener () ▁{ ▁public ▁void ▁actionPerformed ( ActionEvent ▁e ) ▁{ ▁start Cancella (); ▁dispose (); ▁parent . dispose (); ▁start Update (); ▁} ▁} ); ▁} ▁void ▁start Update () ▁{ ▁Frame ▁supp ▁= ▁( parent . padre ) . p ; ▁( ( Principale ) ▁supp ) . updateB loc ca te (); ▁} ▁void ▁start Cancella () ▁{ ▁Frame ▁msg ; ▁Lista Disponibilita ▁elenco _ disp ▁= ▁( Principale . db ) . elenco Disponibilita (); ▁if ▁( elenco _ disp ▁ != ▁null ) ▁{ ▁( Principale . db ) . del Prenotazione ( p . getId Prenotazione ()); ▁ Utils . aggiorna Disp ( elenco _ disp , ▁p . getNumStanz a (), ▁p . getInizio Sogg (), ▁p . getFine Sogg (), ▁ Flag . DISPONIBILE , ▁ Flag . BLOCCATA , ▁true ); ▁if ▁( p . getT ramite Agenzia () ▁== ▁Const . SI ) ▁ Utils . restore Commissioni ( p . getNumStanz a ()); ▁dispose (); ▁padre . setEnabled ( true ); ▁} ▁else ▁msg ▁= ▁new ▁MessageDialog ( this , ▁" ▁P roblemi ▁con ▁il ▁database ▁nella ▁lettura ▁delle ▁disponibilita ! ▁"); ▁} ▁void ▁start Rinnova () ▁{ ▁p . setData Pren ( new ▁Date ()); ▁( Principale . db ) . change Prenotazione ( p . getId Prenotazione (), ▁p . getNumStanz a (), ▁p . getNum Pers (), p . getNome (), p . getCognome (), ▁p . getNum Tel (), ▁p . getInizio Sogg (), ▁p . getFine Sogg (), ▁p . getData Pren (), ▁p . get Caparra (), ▁p . getRich Letto Agg (), ▁p . getP ensionamento (), ▁p . getT ramite Agenzia (), ▁p . getNome Agenzia (), ▁p . getRich P articolari ()); ▁dispose (); ▁parent . setEnabled ( true ); ▁} ▁}